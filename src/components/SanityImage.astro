---
import type { SanityAssetDocument } from "@sanity/client";
import type { ImageUrlBuilderOptionsWithAliases } from "@sanity/image-url";
import { urlForImage } from "@/sanity/lib/urlForImage";

interface Props {
  asset: SanityAssetDocument;
  alt?: string;
  className?: string;
  options?: Partial<ImageUrlBuilderOptionsWithAliases>;
}

const { asset, alt, className, options = {} } = Astro.props;

if (!asset) {
  throw new Error("SanityImage: No asset provided");
}

const url = urlForImage(asset).withOptions(options).auto("format").dpr(2).url();
---

<img
  class={className}
  src={url}
  alt={alt || ""}
  width={options.width}
  height={options.height}
/>
