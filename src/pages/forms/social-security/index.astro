---
import type { SanityDocument } from "@sanity/client";
import BaseLayout from "@/layouts/BaseLayout.astro";
import { loadQuery } from "@/sanity/lib/loadQuery";
import { getFormPdfMetadata } from "@/utils/getFormPdfMetadata";
import { SocialSecurityForm } from "./_Form";

const { data: form } = await loadQuery<SanityDocument>({
  query: `*[_type == "form" && slug.current == $slug][0]`,
  params: {
    slug: "social-security",
  },
});

const pdfs = await getFormPdfMetadata("social-security");
---

<BaseLayout title={form.title} description={form.description} color="white">
  <SocialSecurityForm
    client:load
    title={form.title}
    description={form.description}
    updatedAt={form._updatedAt}
    pdfs={pdfs}
  />
</BaseLayout>
